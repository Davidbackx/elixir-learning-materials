# Internationalization
Internationalization is acomplished by helper files. These helper files contain the translations and will be looked for when the translation is needed.
## Gettext

Phoenix by default uses Gettext for translations. It is a GNU project that uses `.po` and `.pot` files to manage its translations. It offers a lot of features, such as plural forms and much more.

You can see a whole list of pluralforms on [this website](https://localization-guide.readthedocs.io/en/latest/l10n/pluralforms.html#f2), but just to show the complexity:

```text
nl  Dutch       nplurals=2; plural=(n != 1);
en  English     nplurals=2; plural=(n != 1);
ja  Japanese    nplurals=1; plural=0;
hr  Croatian    nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2);
```

Good thing that Gettext helps us with this. Let's get started.

## Configuring gettext

First we'll start with some basic configuration. Add the following section to the `config/config.ex` file as this file contains all preconfigured configuration settings.

```elixir
config :i18n_web, I18nWeb.Gettext,
  locales: ~w(en ja), # ja stands for Japanese.
  default_locale: "en"
```

_As you already know an umbrella project consist of multiple projects. (currently we have `i18n` and `i18n_web` as projects). As the gettext module is automatically generated in the web folder, this configuration as described above should know that these settings apply to the `:i18n_web` project._

The config settings should apply for the Gettext module and contains settings `locales` (a list of all supported languages) & `default_locale` (the default language).

## Change our webpage to use translations

After changing the configuration settings, our webpage still need to use gettext in order to get this translation. First of all our main page:

```html
<!-- index.html.eex -->
<p>
  <%= gettext "Welcome to the world of %{language} and %{framework}!", language: "Elixir", framework: "Phoenix!" %>
</p>
```

_We apply the gettext function on the given string and it has 2 parameters, namely: language and framework which are filled in._

Often you'll see the text here completely corresponding with the actual text. (not having any parameters) This is because the gettext function will by return the string that's passed in when it cannot find an appropiate translation.

### POT files

POT stands for Portable Object Template. These files are automatically generated by `mix gettext.extract`. **Do not edit these files manually!**

_Execute this command in the `:i18n_web` application (i18n_web),  not in the umbrella parent folder!_

When you execute this task, you'll see that there's a new file called `priv/gettext/default.pot`. This file is based on the `gettext` function that you called in your template. Though we'll not add our translations here, we do that in the next section.

### PO files

The Portable Object files are based on the POT files. You'll add your translations here, but in order to do that we'll have to generate them with the task `mix gettext.merge priv/gettext`. Now you should see a `default.po` file in `priv/gettext\en\LC_MESSAGES` which should look like this:

```text
#, elixir-format, fuzzy
#: lib/i18n_web/templates/page/index.html.eex:2
msgid "Welcome to the world of %{language} and %{framework}!"
msgstr ""
```

__Note that the above commands could be run in a single one. This is `mix gettext.extract --merge`.__

### Adding a new language

This gets us started. You can add a new language with `mix gettext.merge priv/gettext --locale ja`. You'll see some new files being added. (`priv/gettext\ja\LC_MESSAGES`) Next we can add our translation in the `ja/LC_MESSAGES/default.po` file:

```text
#, elixir-format
#: lib/i18n_web/templates/page/index.html.eex:2
msgid "Welcome to the world of %{language} and %{framework}!"
msgstr "「%{language}」と「%{framework}」の世界へようこそ！"
```

_test it out manually, change your default language in your config to `ja`. restart your webserver and there you go!_

## Remaining files

Next we do the same thing again but for the second page. Adjust the following files and execute the following tasks:

```html
<!-- another_index.html.eex -->
<p>
    <%= gettext "Students from UCLL are so great! They can make a website with %{framework} in English and Japanese!", framework: "Phoenix" %>
</p>
```

```bash
mix gettext.extract --merge
```
_Run this again in the `i18n_web` folder_

Edit the `.po` files again for the correct language.  

If you are not able the make the translation to japanse yourself it is given below.

```text
#, elixir-format
#: lib/i18n_web/templates/page/another_index.html.eex:2
msgid "Students from UCLL are so great! They can make a website with %{framework} in English and Japanese!"
msgstr "「UCLL」という大学の生徒はすごいです！「%{framework}」で英語と日本語のウェブサイトを作ることができます！"
```

By changing the default locale in the config file, you can see that the translation is working.